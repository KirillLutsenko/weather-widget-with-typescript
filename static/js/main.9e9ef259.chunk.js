(this["webpackJsonpweather-widget-with-typescript"]=this["webpackJsonpweather-widget-with-typescript"]||[]).push([[0],{28:function(e,t,r){},30:function(e,t,r){},31:function(e,t,r){},32:function(e,t,r){},34:function(e,t,r){},35:function(e,t,r){},36:function(e,t,r){},37:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(6),c=r.n(a),i=r(4),s=r(15),u=r(3),o=r(2),l="WEATHER_START_FETCHING",d="WEATHER_STOP_FETCHING",p="WEATHER_FILL",m="WEATHER_SET_FETCHING_ERROR",h="WEATHER_SET_MIN_TEMPERATURE",b="WEATHER_SET_MAX_TEMPERATURE",j="WEATHER_SET_TYPE_OF_WEATHER",f="WEATHER_SET_MINTEMPVALID_ERROR",y="WEATHER_SET_MAXTEMPVALID_ERROR",x="WEATHER_SET_STATUS_OF_FILTER",T={data:[],isFetching:!1,error:null,weatherType:"sunny",minTemperature:"",maxTemperature:"",minTempValidError:!1,maxTempValidError:!1,filterStatus:!1},O=Object.freeze({WEATHER_SET_ACTIVE_DAY:"WEATHER_SET_ACTIVE_DAY"}),E={activeId:0},g=Object(u.b)({weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{isFetching:!0});case d:return Object(o.a)(Object(o.a)({},e),{},{isFetching:!1});case m:return Object(o.a)(Object(o.a)({},e),{},{error:t.payload,data:null});case p:return Object(o.a)(Object(o.a)({},e),{},{data:t.payload,error:null});case j:return Object(o.a)(Object(o.a)({},e),{},{weatherType:t.payload});case h:return Object(o.a)(Object(o.a)({},e),{},{minTemperature:t.payload});case b:return Object(o.a)(Object(o.a)({},e),{},{maxTemperature:t.payload});case f:return Object(o.a)(Object(o.a)({},e),{},{minTempValidError:t.payload});case y:return Object(o.a)(Object(o.a)({},e),{},{maxTempValidError:t.payload});case x:return Object(o.a)(Object(o.a)({},e),{},{filterStatus:t.payload});default:return e}},weatherDayId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.WEATHER_SET_ACTIVE_DAY:return{activeId:t.payload};default:return e}}}),_=r(13),v=r(14),N=(Object(_.createLogger)({duration:!0,collapsed:!0,colors:{title:function(e){return e.error?"firebrick":"deepskyblue"},prevState:function(){return"#1C5FAF"},action:function(){return"#149945"},nextState:function(){return"#A47104"},error:function(){return"#FF0005"}}}),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c);console.log(N);var F=u.c,A=[v.a];var w=Object(u.d)(g,F(u.a.apply(void 0,Object(s.a)(A)))),k=r(5),R=r.n(k),S=r(7),I=Object.freeze({weather:{fetch:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return fetch("".concat("https://lab.lectrum.io/rtx/api/","/forecast"),{method:"GET"})}))}}),M={startFetching:function(){return{type:l}},stopFetching:function(){return{type:d}},fill:function(e){return{type:p,payload:e}},setFetchingError:function(e){return{type:m,error:e,payload:e}},fetchAsync:function(){return function(){var e=Object(S.a)(R.a.mark((function e(t){var r,n,a,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(M.startFetching()),e.next=3,I.weather.fetch();case 3:if(200!==(r=e.sent).status){e.next=12;break}return e.next=7,r.json();case 7:n=e.sent,a=n.data,t(M.fill(a)),e.next=14;break;case 12:c={status:r.status},t(M.setFetchingError(c));case 14:t(M.stopFetching());case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setMinTemperature:function(e){return{type:h,payload:e}},setMaxTemperature:function(e){return{type:b,payload:e}},setTypeOfWeather:function(e){return{type:j,payload:e}},setMinTempValidationError:function(e){return{type:f,payload:e}},setMaxTempValidationError:function(e){return{type:y,payload:e}},setFilterStatus:function(e){return{type:x,payload:e}}},V=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.weather})),r=t.data,a=t.isFetching,c=t.error,s=t.minTemperature,u=t.maxTemperature,o=t.weatherType,l=t.minTempValidError,d=t.maxTempValidError,p=t.filterStatus;Object(n.useEffect)((function(){e(M.fetchAsync())}),[e]);var m=function(){var t=Object(S.a)(R.a.mark((function t(){var n;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==s||""!==u){t.next=5;break}e(M.setMinTempValidationError(!0)),e(M.setMaxTempValidationError(!0)),t.next=18;break;case 5:if(""!==s){t.next=9;break}e(M.setMinTempValidationError(!0)),t.next=18;break;case 9:if(""!==u){t.next=13;break}e(M.setMaxTempValidationError(!0)),t.next=18;break;case 13:return t.next=15,e(M.fetchAsync());case 15:n=null!==r?r.filter((function(e){return e.type===o&&e.temperature>=Number(s)&&e.temperature<=Number(u)})):null,e(M.fill(n)),e(M.setFilterStatus(!0));case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{data:r,isFetching:a,error:c,minTemperature:s,maxTemperature:u,weatherType:o,minTempValidError:l,maxTempValidError:d,filterStatus:p,minTemperatureChange:function(t){var r=t.replace(/[^\d.]/g,"");e(M.setMinTempValidationError(!1)),e(M.setMinTemperature(r))},maxTemperatureChange:function(t){var r=t.replace(/[^\d.]/g,"");e(M.setMaxTempValidationError(!1)),e(M.setMaxTemperature(r))},setWeatherType:function(t){return e(M.setTypeOfWeather(t))},filterWeather:m,resetFilters:function(){e(M.fetchAsync()),e(M.setMinTemperature("")),e(M.setMaxTemperature("")),e(M.setTypeOfWeather("sunny")),e(M.setFilterStatus(!1))}}},C=(r(28),r(0)),W=function(){var e=V(),t=e.minTemperature,r=e.maxTemperature,n=e.minTempValidError,a=e.maxTempValidError,c=e.filterStatus,i=e.filterWeather,s=e.minTemperatureChange,u=e.maxTemperatureChange,o=e.resetFilters;return Object(C.jsxs)("div",{className:"filter-inputs",children:[Object(C.jsxs)("div",{className:"custom-input",children:[Object(C.jsx)("label",{htmlFor:"min-temperature",children:"Minimum temperature"}),Object(C.jsx)("input",{id:"min-temperature",type:"text",maxLength:2,value:t,onChange:function(e){return s(e.target.value)}}),n&&Object(C.jsx)("p",{className:"validation-error",children:"Enter temperature"})]}),Object(C.jsxs)("div",{className:"custom-input",children:[Object(C.jsx)("label",{htmlFor:"min-temperature",children:"Maximum temperature"}),Object(C.jsx)("input",{id:"max-temperature",type:"text",maxLength:2,value:r,onChange:function(e){return u(e.target.value)}}),a&&Object(C.jsx)("p",{className:"validation-error",children:"Enter temperature"})]}),c?Object(C.jsx)("button",{type:"button",onClick:o,className:"button",children:"Reset filters"}):Object(C.jsx)("button",{type:"button",onClick:i,className:"button",children:"Filter"})]})},H=(r(30),r(9)),D=function(){var e=V(),t=e.weatherType,r=e.setWeatherType;return Object(C.jsxs)("div",{className:"filter-labels",children:[Object(C.jsxs)("label",{className:"filter__label",htmlFor:"cloudy",children:[Object(C.jsx)("span",{className:H("checkbox",{"checkbox checkbox-selected":"cloudy"===t}),children:"Cloudy"}),Object(C.jsx)("input",{type:"radio",id:"cloudy",name:"filter",className:"radio-checkbox",onChange:function(){return r("cloudy")},checked:"cloudy"===t})]}),Object(C.jsxs)("label",{className:"filter__label",htmlFor:"sunny",children:[Object(C.jsx)("span",{className:H("checkbox",{"checkbox checkbox-selected":"sunny"===t}),children:"Sunny"}),Object(C.jsx)("input",{type:"radio",id:"sunny",name:"filter",className:"radio-checkbox",onChange:function(){return r("sunny")},checked:"sunny"===t})]}),Object(C.jsxs)("label",{className:"filter__label",htmlFor:"rainy",children:[Object(C.jsx)("span",{className:H("checkbox",{"checkbox checkbox-selected":"rainy"===t}),children:"Rainy"}),Object(C.jsx)("input",{type:"radio",id:"rainy",name:"filter",className:"radio-checkbox",onChange:function(){return r("rainy")},checked:"rainy"===t})]})]})},L=(r(31),function(){return Object(C.jsxs)("div",{className:"filter",children:[Object(C.jsx)(D,{}),Object(C.jsx)(W,{})]})}),P=Object.freeze({setUserId:function(e){return{type:O.WEATHER_SET_ACTIVE_DAY,payload:e}}}),U=function(){var e=Object(i.b)();return{dayId:Object(i.c)((function(e){return e.weatherDayId.activeId})),useDayId:function(t){return e(P.setUserId(t))}}},Y=(r(32),r(9)),G=r(11),X=function(){var e=V(),t=e.data,r=e.isFetching,n=U().dayId;return Object(C.jsxs)("div",{className:"head",children:[Object(C.jsx)("div",{className:t&&t.length&&Y("icon",{"icon sunny":t&&t.length&&"sunny"===t[n].type,"icon cloudy":t&&t.length&&"cloudy"===t[n].type,"icon rainy":t&&t.length&&"rainy"===t[n].type})}),Object(C.jsxs)("div",{className:"current-date",children:[Object(C.jsx)("p",{children:!r&&t&&t.length&&G(t[n].day).format("dddd")}),Object(C.jsx)("span",{children:!r&&t&&t.length&&G(t[n].day).format("MMMM do")})]})]})},z=(r(34),function(e){var t,r=e.getTemperature,n=V(),a=n.data,c=n.isFetching,i=U().dayId;return Object(C.jsxs)("div",{className:"current-weather",children:[Object(C.jsx)("p",{className:"temperature",children:!c&&r(i)}),Object(C.jsxs)("p",{className:"meta",children:[Object(C.jsx)("span",{className:"rainy",children:"%".concat(!c&&(t=i,a&&a.length&&a[t].rain_probability))}),Object(C.jsx)("span",{className:"humidity",children:"%".concat(!c&&function(e){return a&&a.length&&a[e].humidity}(i))})]})]})}),B=(r(35),r(9)),J=r(11),K=function(e){var t=e.getTemperature,r=U(),n=r.dayId,a=r.useDayId,c=V(),i=c.isFetching,s=c.data,u=function(e){return a(e)};return Object(C.jsx)("div",{className:"forecast",children:!i&&s&&s.length&&s.slice(0,7).map((function(e,r){return Object(C.jsxs)("div",{onClick:function(){return u(r)},onKeyDown:function(){return u(r)},tabIndex:0,role:"button",className:B("day",{"day selected":r===n,"day sunny":"sunny"===e.type,"day cloudy":"cloudy"===e.type,"day rainy":"rainy"===e.type}),children:[Object(C.jsx)("p",{children:J(e.day).format("dddd")}),Object(C.jsx)("span",{children:t(r)})]},e.id)}))})},q=(r(36),function(){var e=V(),t=e.isFetching,r=e.data,n=e.error,a=e.resetFilters;if(n)return Object(C.jsx)("p",{className:"error",children:"Sorry, weather forecast is not found"});if(n)return Object(C.jsx)("p",{className:"error",children:"Sorry, something went wrong"});if(!t&&r&&0===r.length)return Object(C.jsxs)("div",{className:"error",children:[Object(C.jsx)("p",{children:"By given criteria no days available"}),Object(C.jsx)("button",{type:"button",onClick:a,className:"reset-button",children:"Reset filters"})]});var c=function(e){return r&&r.length&&r[e].temperature};return Object(C.jsxs)("div",{className:"weather-widget",children:[t&&Object(C.jsx)("p",{className:"error",children:"Loading data from api"}),Object(C.jsxs)("main",{className:"weather-widget__main-block",children:[Object(C.jsx)(L,{}),Object(C.jsx)(X,{}),Object(C.jsx)(z,{getTemperature:c}),Object(C.jsx)(K,{getTemperature:c})]})]})});c.a.render(Object(C.jsx)(i.a,{store:w,children:Object(C.jsx)(q,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.9e9ef259.chunk.js.map